(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{398:function(e,t,a){e.exports=a(700)},403:function(e,t,a){},700:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),o=a.n(i),c=(a(403),a(711)),l=a(387),u=a(728),s=a(388),m=a(143),d=a(25),p=a(28),b=a(38),f=a(20),h=a.n(f),g=a(386),v=a(12),y=a(65),E=a(10),w=(a(128),a(8)),j=a(66),O=a.n(j),C=a(40);O.a.defaults.baseURL="/api",O.a.interceptors.request.use((function(e){var t=window.localStorage.getItem("jwt");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),O.a.interceptors.response.use(void 0,(function(e){"Network Error"!==e.message||e.response||C.b.error("network error-Api is not running");var t=e.response,a=t.status,n=t.data,r=t.config;throw 404===a&&Aa.push("/notfound"),400===a&&"get"===r.method&&n.erros.hasOwnProperty("id")&&Aa.push("/notfound"),500===a&&C.b.error("Server error- check terminal for info"),e.response}));var S,x,k,P,A,z,I,M,R,D,T,F,N,L,H,G,U,B,q,V,W,Y,J,K,$,Q,X,Z,_,ee,te,ae,ne,re,ie,oe,ce,le,ue,se,me,de,pe,be,fe,he,ge,ve,ye,Ee,we,je,Oe,Ce,Se,xe,ke,Pe,Ae,ze,Ie=function(e){return e.data},Me=function(e){return function(t){return new Promise((function(a){return setTimeout((function(){return a(t)}),e)}))}},Re=function(e){return O.a.get(e).then(Me(1e3)).then(Ie)},De=function(e,t){return O.a.post(e,t).then(Me(1e3)).then(Ie)},Te=function(e,t){return O.a.put(e,t).then(Me(1e3)).then(Ie)},Fe=function(e){return O.a.delete(e).then(Me(1e3)).then(Ie)},Ne=function(e,t){var a=new FormData;return a.append("File",t),O.a.post(e,a,{headers:{"Content-type":"multipart/form-data"}}).then(Ie)},Le={list:function(e){return O.a.get("/activities",{params:e}).then(Me(1e3)).then(Ie)},details:function(e){return Re("/activities/".concat(e))},create:function(e){return De("/activities",e)},update:function(e){return Te("/activities/".concat(e.id),e)},delete:function(e){return Fe("/activities/".concat(e))},attend:function(e){return De("/activities/".concat(e,"/attend"),{})},unattend:function(e){return Fe("/activities/".concat(e,"/attend"))}},He={current:function(){return Re("/user")},login:function(e){return De("/user/login",e)},register:function(e){return De("/user/register",e)}},Ge={get:function(e){return Re("/profiles/".concat(e))},uploadPhoto:function(e){return Ne("/photos",e)},setMainPhoto:function(e){return De("/photos/".concat(e,"/setMain"),{})},deletePhoto:function(e){return Fe("/photos/".concat(e))},updateProfile:function(e){return Te("/profiles",e)},follow:function(e){return De("/profiles/".concat(e,"/follow"),{})},unfollow:function(e){return Fe("/profiles/".concat(e,"/follow"))},list:function(e,t){return Re("/profiles/".concat(e,"/follow?predicate=").concat(t))},listActivities:function(e,t){return Re("/profiles/".concat(e,"/activities?predicate=").concat(t))}},Ue=function(e,t){return e.date=new Date(e.date),e.isGoing=e.attendees.some((function(e){return e.usename===t.userName})),e.isHost=e.attendees.some((function(e){return e.usename===t.userName&&e.isHost})),e},Be=function(e){return{displayName:e.displayName,isHost:!1,usename:e.userName,image:e.image}},qe=a(240),Ve=(S=w.f.ref,x=function(){function e(t){var a=this;Object(b.a)(this,e),this.rootStore=void 0,Object(v.a)(this,"activityRegistry",k,this),Object(v.a)(this,"activity",P,this),Object(v.a)(this,"loadingInitial",A,this),Object(v.a)(this,"sumbitting",z,this),Object(v.a)(this,"target",I,this),Object(v.a)(this,"loading",M,this),Object(v.a)(this,"hubConnection",R,this),Object(v.a)(this,"activityCount",D,this),Object(v.a)(this,"page",T,this),Object(v.a)(this,"predicate",F,this),Object(v.a)(this,"setPredicate",N,this),Object(v.a)(this,"setPage",L,this),Object(v.a)(this,"createHubConnection",H,this),Object(v.a)(this,"stopHubConnection",G,this),Object(v.a)(this,"addComment",U,this),Object(v.a)(this,"loadActivities",B,this),Object(v.a)(this,"loadActivity",q,this),Object(v.a)(this,"clearActivity",V,this),this.getActivity=function(e){return a.activityRegistry.get(e)},Object(v.a)(this,"createActivity",W,this),Object(v.a)(this,"editActivity",Y,this),Object(v.a)(this,"deleteActivity",J,this),Object(v.a)(this,"attendActivity",K,this),Object(v.a)(this,"cancelAttendance",$,this),this.rootStore=t,Object(w.g)((function(){return a.predicate.keys()}),(function(){a.page=0,a.activityRegistry.clear(),a.loadActivities()}))}return Object(y.a)(e,[{key:"groupActivitiesByDate",value:function(e){var t=e.sort((function(e,t){return e.date.getTime()-t.date.getTime()}));return Object.entries(t.reduce((function(e,t){var a=t.date.toISOString().split("T")[0];return e[a]=e[a]?[].concat(Object(g.a)(e[a]),[t]):[t],e}),{}))}},{key:"axiosParams",get:function(){var e=new URLSearchParams;return e.append("limit",String(2)),e.append("offset","".concat(this.page?2*this.page:0)),this.predicate.forEach((function(t,a){"startDate"===a?e.append(a,t.toISOString()):e.append(a,t)})),e}},{key:"totalPages",get:function(){return Math.ceil(this.activityCount/2)}},{key:"activitiesbyDate",get:function(){return this.groupActivitiesByDate(Array.from(this.activityRegistry.values()))}}]),e}(),k=Object(E.a)(x.prototype,"activityRegistry",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),P=Object(E.a)(x.prototype,"activity",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=Object(E.a)(x.prototype,"loadingInitial",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=Object(E.a)(x.prototype,"sumbitting",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=Object(E.a)(x.prototype,"target",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=Object(E.a)(x.prototype,"loading",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=Object(E.a)(x.prototype,"hubConnection",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=Object(E.a)(x.prototype,"activityCount",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=Object(E.a)(x.prototype,"page",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=Object(E.a)(x.prototype,"predicate",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),N=Object(E.a)(x.prototype,"setPredicate",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.predicate.clear(),"all"!==t&&e.predicate.set(t,a)}}}),Object(E.a)(x.prototype,"axiosParams",[w.c],Object.getOwnPropertyDescriptor(x.prototype,"axiosParams"),x.prototype),Object(E.a)(x.prototype,"totalPages",[w.c],Object.getOwnPropertyDescriptor(x.prototype,"totalPages"),x.prototype),L=Object(E.a)(x.prototype,"setPage",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.page=t}}}),H=Object(E.a)(x.prototype,"createHubConnection",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hubConnection=(new qe.a).withUrl("/chat",{accessTokenFactory:function(){return e.rootStore.commonStore.token}}).configureLogging(qe.b.Information).build(),e.hubConnection.start().then((function(){return console.log(e.hubConnection.state)})).then((function(){var a;console.log("Attempting to join group"),"Connected"===e.hubConnection.state&&(null===(a=e.hubConnection)||void 0===a||a.invoke("AddToGroup",t))})).catch((function(e){return console.log("error connecting: ",e)})),e.hubConnection.on("ReceiveComment",(function(t){Object(w.h)((function(){e.activity.comments.push(t)}))})),e.hubConnection.on("Send",(function(e){console.log(e)}))}}}),G=Object(E.a)(x.prototype,"stopHubConnection",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.hubConnection.invoke("RemoveFromGroup",e.activity.id).then((function(){e.hubConnection.stop()})).then((function(){return console.log("Connection stopped")})).catch((function(e){return console.log(e)}))}}}),U=Object(E.a)(x.prototype,"addComment",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t.acitvityId=e.activity.id,a.prev=1,a.next=4,h.a.awrap(e.hubConnection.invoke("SendComment",t));case 4:a.next=9;break;case 6:a.prev=6,a.t0=a.catch(1),console.log(a.t0);case 9:case"end":return a.stop()}}),null,null,[[1,6]])}}}),Object(E.a)(x.prototype,"activitiesbyDate",[w.c],Object.getOwnPropertyDescriptor(x.prototype,"activitiesbyDate"),x.prototype),B=Object(E.a)(x.prototype,"loadActivities",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,a,n;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.loadingInitial=!0,r.prev=1,r.next=4,h.a.awrap(Le.list(e.axiosParams));case 4:t=r.sent,a=t.activities,n=t.activityCount,Object(w.h)("loading Activities",(function(){a.forEach((function(t){Ue(t,e.rootStore.userStore.user),e.activityRegistry.set(t.id,t)})),e.activityCount=n,e.loadingInitial=!1})),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),Object(w.h)("loadA tivities Error",(function(){e.loadingInitial=!1})),console.log(r.t0);case 13:case"end":return r.stop()}}),null,null,[[1,9]])}}}),q=Object(E.a)(x.prototype,"loadActivity",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=e.getActivity(t))){n.next=6;break}return e.activity=a,n.abrupt("return",a);case 6:return e.loadingInitial=!0,n.prev=7,n.next=10,h.a.awrap(Le.details(t));case 10:return a=n.sent,Object(w.h)("getting acitvity",(function(){Ue(a,e.rootStore.userStore.user),e.activity=a,e.activityRegistry.set(a.id,a),e.loadingInitial=!1})),n.abrupt("return",a);case 15:n.prev=15,n.t0=n.catch(7),Object(w.h)("get activity error",(function(){e.loadingInitial=!1})),console.log(n.t0);case 19:case"end":return n.stop()}}),null,null,[[7,15]])}}}),V=Object(E.a)(x.prototype,"clearActivity",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.activity=null}}}),W=Object(E.a)(x.prototype,"createActivity",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a,n;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.sumbitting=!0,r.prev=1,r.next=4,h.a.awrap(Le.create(t));case 4:(a=Be(e.rootStore.userStore.user)).isHost=!0,(n=[]).push(a),t.attendees=n,t.comments=[],t.isHost=!0,Object(w.h)("creating activity",(function(){e.activityRegistry.set(t.id,t),e.sumbitting=!1})),Aa.push("/activities/".concat(t.id)),r.next=20;break;case 15:r.prev=15,r.t0=r.catch(1),Object(w.h)("create activity error",(function(){e.sumbitting=!1})),C.b.error("Problem submitting data"),console.log(r.t0.response);case 20:case"end":return r.stop()}}),null,null,[[1,15]])}}}),Y=Object(E.a)(x.prototype,"editActivity",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.sumbitting=!0,a.prev=1,a.next=4,h.a.awrap(Le.update(t));case 4:Object(w.h)("edit activity",(function(){e.activityRegistry.set(t.id,t),e.activity=t,e.sumbitting=!1})),Aa.push("/activities/".concat(t.id)),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),Object(w.h)("edit activity error",(function(){e.sumbitting=!1})),console.log(a.t0);case 12:case"end":return a.stop()}}),null,null,[[1,8]])}}}),J=Object(E.a)(x.prototype,"deleteActivity",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.sumbitting=!0,e.target=t.currentTarget.name,n.prev=2,n.next=5,h.a.awrap(Le.delete(a));case 5:Object(w.h)("delete activity",(function(){e.activityRegistry.delete(a),e.sumbitting=!1,e.target=""})),Aa.push("/activities/"),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),Object(w.h)("delete activity error",(function(){e.sumbitting=!1,e.target=""})),console.log(n.t0);case 13:case"end":return n.stop()}}),null,null,[[2,9]])}}}),K=Object(E.a)(x.prototype,"attendActivity",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=Be(e.rootStore.userStore.user),e.loading=!0,a.prev=2,a.next=5,h.a.awrap(Le.attend(e.activity.id));case 5:Object(w.h)((function(){e.activity&&(e.activity.attendees.push(t),e.activity.isGoing=!0,e.activityRegistry.set(e.activity.id,e.activity),e.loading=!1)})),a.next=13;break;case 8:a.prev=8,a.t0=a.catch(2),Object(w.h)((function(){e.loading=!1})),e.loading=!1,C.b.error("Prob signing up to activiy");case 13:case"end":return a.stop()}}),null,null,[[2,8]])}}}),$=Object(E.a)(x.prototype,"cancelAttendance",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,h.a.awrap(Le.unattend(e.activity.id));case 4:Object(w.h)((function(){e.activity&&(e.activity.attendees=e.activity.attendees.filter((function(t){return t.usename!==e.rootStore.userStore.user.userName})),e.activity.isGoing=!1,e.activityRegistry.set(e.activity.id,e.activity),e.loading=!1)})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),Object(w.h)((function(){e.loading=!1})),C.b.error("Prob  canelling attendance");case 11:case"end":return t.stop()}}),null,null,[[1,7]])}}}),x),We=(Q=function(){function e(t){Object(b.a)(this,e),this.rootStore=void 0,Object(v.a)(this,"user",X,this),Object(v.a)(this,"login",Z,this),Object(v.a)(this,"register",_,this),Object(v.a)(this,"getUser",ee,this),Object(v.a)(this,"logout",te,this),this.rootStore=t}return Object(y.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}}]),e}(),X=Object(E.a)(Q.prototype,"user",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(E.a)(Q.prototype,"isLoggedIn",[w.c],Object.getOwnPropertyDescriptor(Q.prototype,"isLoggedIn"),Q.prototype),Z=Object(E.a)(Q.prototype,"login",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(He.login(t));case 3:a=n.sent,Object(w.h)("login",(function(){e.user=a})),e.rootStore.commonStore.setToken(a.token),e.rootStore.modalStore.closeModal(),Aa.push("/activities"),n.next=13;break;case 10:throw n.prev=10,n.t0=n.catch(0),n.t0;case 13:case"end":return n.stop()}}),null,null,[[0,10]])}}}),_=Object(E.a)(Q.prototype,"register",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(He.register(t));case 3:a=n.sent,e.rootStore.commonStore.setToken(a.token),e.rootStore.modalStore.closeModal(),Aa.push("/activities"),n.next=12;break;case 9:throw n.prev=9,n.t0=n.catch(0),n.t0;case 12:case"end":return n.stop()}}),null,null,[[0,9]])}}}),ee=Object(E.a)(Q.prototype,"getUser",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(He.current());case 3:t=a.sent,Object(w.h)((function(){e.user=t})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])}}}),te=Object(E.a)(Q.prototype,"logout",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.rootStore.commonStore.setToken(null),e.user=null,Aa.push("/")}}}),Q),Ye=(ae=function e(t){var a=this;Object(b.a)(this,e),this.rootStore=void 0,Object(v.a)(this,"token",ne,this),Object(v.a)(this,"appLoaded",re,this),Object(v.a)(this,"setToken",ie,this),Object(v.a)(this,"setAppLoaded",oe,this),this.rootStore=t,Object(w.g)((function(){return a.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},ne=Object(E.a)(ae.prototype,"token",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("jwt")}}),re=Object(E.a)(ae.prototype,"appLoaded",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ie=Object(E.a)(ae.prototype,"setToken",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){window.localStorage.setItem("jwt",t),e.token=t}}}),oe=Object(E.a)(ae.prototype,"setAppLoaded",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.appLoaded=!0}}}),ae),Je=(ce=w.f.shallow,le=function e(t){Object(b.a)(this,e),this.rootStore=void 0,Object(v.a)(this,"modal",ue,this),Object(v.a)(this,"openModal",se,this),Object(v.a)(this,"closeModal",me,this),this.rootStore=t},ue=Object(E.a)(le.prototype,"modal",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{open:!1,body:null}}}),se=Object(E.a)(le.prototype,"openModal",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.modal.open=!0,e.modal.body=t}}}),me=Object(E.a)(le.prototype,"closeModal",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.modal.open=!1,e.modal.body=null}}}),le),Ke=a(116),$e=(de=function(){function e(t){var a=this;Object(b.a)(this,e),this.rootStore=void 0,Object(v.a)(this,"profile",pe,this),Object(v.a)(this,"loadingProfile",be,this),Object(v.a)(this,"uploadingPhoto",fe,this),Object(v.a)(this,"loading",he,this),Object(v.a)(this,"followings",ge,this),Object(v.a)(this,"activeTab",ve,this),Object(v.a)(this,"userActivities",ye,this),Object(v.a)(this,"loadingActivities",Ee,this),Object(v.a)(this,"setActiveTab",we,this),Object(v.a)(this,"loadUserActivities",je,this),Object(v.a)(this,"loadProfile",Oe,this),Object(v.a)(this,"uploadPhoto",Ce,this),Object(v.a)(this,"setMain",Se,this),Object(v.a)(this,"deletePhoto",xe,this),Object(v.a)(this,"updateProfile",ke,this),Object(v.a)(this,"follow",Pe,this),Object(v.a)(this,"unfollow",Ae,this),Object(v.a)(this,"loadFollowings",ze,this),this.rootStore=t,Object(w.g)((function(){return a.activeTab}),(function(e){if(3===e||4===e){var t=3===e?"followers":"following";a.loadFollowings(t)}else a.followings=[]}))}return Object(y.a)(e,[{key:"isCurrentUser",get:function(){return!(!this.rootStore.userStore.user||!this.profile)&&this.rootStore.userStore.user.userName===this.profile.userName}}]),e}(),pe=Object(E.a)(de.prototype,"profile",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=Object(E.a)(de.prototype,"loadingProfile",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),fe=Object(E.a)(de.prototype,"uploadingPhoto",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=Object(E.a)(de.prototype,"loading",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ge=Object(E.a)(de.prototype,"followings",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=Object(E.a)(de.prototype,"activeTab",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ye=Object(E.a)(de.prototype,"userActivities",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ee=Object(E.a)(de.prototype,"loadingActivities",[w.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),we=Object(E.a)(de.prototype,"setActiveTab",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.activeTab=t}}}),Object(E.a)(de.prototype,"isCurrentUser",[w.c],Object.getOwnPropertyDescriptor(de.prototype,"isCurrentUser"),de.prototype),je=Object(E.a)(de.prototype,"loadUserActivities",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){var n;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.loadingActivities=!0,r.prev=1,r.next=4,h.a.awrap(Ge.listActivities(t,a));case 4:n=r.sent,Object(w.h)((function(){e.userActivities=n,e.loadingActivities=!1})),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(1),C.b.error("Problem loading activities"),Object(w.h)((function(){e.loadingActivities=!1}));case 12:case"end":return r.stop()}}),null,null,[[1,8]])}}}),Oe=Object(E.a)(de.prototype,"loadProfile",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loadingProfile=!0,n.prev=1,n.next=4,h.a.awrap(Ge.get(t));case 4:a=n.sent,Object(w.h)((function(){e.profile=a,e.loadingProfile=!1})),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),Object(w.h)((function(){e.loadingProfile=!1})),console.log(n.t0);case 12:case"end":return n.stop()}}),null,null,[[1,8]])}}}),Ce=Object(E.a)(de.prototype,"uploadPhoto",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.uploadingPhoto=!0,n.prev=1,n.next=4,h.a.awrap(Ge.uploadPhoto(t));case 4:a=n.sent,Object(w.h)((function(){e.profile&&(e.profile.photos.push(a),a.isMain&&e.rootStore.userStore.user&&(e.rootStore.userStore.user.image=a.url,e.profile.image=a.url)),e.uploadingPhoto=!1})),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0),C.b.error("Problem uploading photo"),Object(w.h)((function(){e.uploadingPhoto=!1}));case 13:case"end":return n.stop()}}),null,null,[[1,8]])}}}),Se=Object(E.a)(de.prototype,"setMain",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,h.a.awrap(Ge.setMainPhoto(t.id));case 4:Object(w.h)((function(){e.rootStore.userStore.user.image=t.url,e.profile.photos.find((function(e){return e.isMain})).isMain=!1,e.profile.photos.find((function(e){return e.id===t.id})).isMain=!0,e.profile.image=t.url,e.loading=!1})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(1),C.b.error("Problem setting photo as main"),Object(w.h)((function(){e.loading=!1}));case 11:case"end":return a.stop()}}),null,null,[[1,7]])}}}),xe=Object(E.a)(de.prototype,"deletePhoto",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,h.a.awrap(Ge.deletePhoto(t.id));case 4:Object(w.h)((function(){e.profile.photos=e.profile.photos.filter((function(e){return e.id!==t.id})),e.loading=!1})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(1),C.b.error("Problem deleting photo"),Object(w.h)((function(){e.loading=!1}));case 11:case"end":return a.stop()}}),null,null,[[1,7]])}}}),ke=Object(E.a)(de.prototype,"updateProfile",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(Ge.updateProfile(t));case 3:Object(w.h)((function(){t.displayName!==e.rootStore.userStore.user.displayName&&(e.rootStore.userStore.user.displayName=t.displayName),e.profile=Object(Ke.a)({},e.profile,{},t)})),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),C.b.error("Problem updating profile");case 9:case"end":return a.stop()}}),null,null,[[0,6]])}}}),Pe=Object(E.a)(de.prototype,"follow",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,h.a.awrap(Ge.follow(t));case 4:Object(w.h)((function(){e.profile.following=!0,e.profile.followersCount++,e.loading=!1})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(1),C.b.error("Problem following user"),Object(w.h)((function(){e.loading=!1}));case 11:case"end":return a.stop()}}),null,null,[[1,7]])}}}),Ae=Object(E.a)(de.prototype,"unfollow",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,h.a.awrap(Ge.unfollow(t));case 4:Object(w.h)((function(){e.profile.following=!1,e.profile.followersCount--,e.loading=!1})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(1),C.b.error("Problem unfollowing user"),Object(w.h)((function(){e.loading=!1}));case 11:case"end":return a.stop()}}),null,null,[[1,7]])}}}),ze=Object(E.a)(de.prototype,"loadFollowings",[w.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.prev=1,n.next=4,h.a.awrap(Ge.list(e.profile.userName,t));case 4:a=n.sent,Object(w.h)((function(){e.followings=a,e.loading=!1})),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),C.b.error("Problem loading followings"),Object(w.h)((function(){e.loading=!1}));case 12:case"end":return n.stop()}}),null,null,[[1,8]])}}}),de);Object(w.d)({enforceActions:"always"});var Qe=Object(n.createContext)(new function e(){Object(b.a)(this,e),this.activityStore=void 0,this.userStore=void 0,this.commonStore=void 0,this.modalStore=void 0,this.profileStore=void 0,this.activityStore=new Ve(this),this.commonStore=new Ye(this),this.modalStore=new Je(this),this.userStore=new We(this),this.profileStore=new $e(this)}),Xe=Object(d.a)((function(){var e=Object(n.useContext)(Qe).userStore,t=e.logout,a=e.user;return r.a.createElement(l.a,{fixed:"top",inverted:!0},r.a.createElement(c.a,null,r.a.createElement(l.a.Item,{header:!0,as:p.b,exact:!0,to:"/"},r.a.createElement("img",{src:"/assets/logo.png",alt:"logo",style:{marginRight:"10px"}}),"SportifyMe"),r.a.createElement(l.a.Item,{name:"Activities",as:p.b,to:"/activities"}),r.a.createElement(l.a.Item,null,r.a.createElement(u.a,{as:p.b,to:"/createActivity",positive:!0,content:"Create Activity"})),a&&r.a.createElement(l.a.Item,{position:"right"},r.a.createElement(s.a,{avatar:!0,spaced:"right",src:a.image||"/assets/user.png"}),r.a.createElement(m.a,{pointing:"top left",text:a.displayName},r.a.createElement(m.a.Menu,null,r.a.createElement(m.a.Item,{as:p.a,to:"/profile/".concat(a.userName),text:"My profile",icon:"user"}),r.a.createElement(m.a.Item,{onClick:t,text:"Logout",icon:"power"}))))))})),Ze=a(52),_e=a(389),et=a(714),tt=a(190),at=a(722),nt=a(241),rt=a(89),it=a(717),ot=a(724),ct=a(721),lt={borderColor:"orange",borderWidth:"2"},ut=function(e){var t=e.attendees;return r.a.createElement(ot.a,{horizontal:!0},t.map((function(e){return r.a.createElement(ot.a.Item,{key:e.usename},r.a.createElement(ct.a,{header:e.displayName,trigger:r.a.createElement(s.a,{size:"mini",circular:!0,src:e.image||"/assets/user.png",bordered:!0,style:e.following?lt:null})}))})))},st=function(e){var t=e.activity,a=t.attendees.filter((function(e){return e.isHost}))[0];return r.a.createElement(nt.a.Group,null,r.a.createElement(nt.a,null,r.a.createElement(at.a.Group,null,r.a.createElement(at.a,null,r.a.createElement(at.a.Image,{size:"tiny",circular:!0,src:a.image||"/assets/user.png",style:{marginBottom:3}}),r.a.createElement(at.a.Content,null,r.a.createElement(at.a.Header,{as:p.a,to:"/activities/".concat(t.id)},t.title),r.a.createElement(at.a.Description,null,"Hosted by"," ",r.a.createElement(p.a,{to:"/profile/".concat(a.usename)}," ",a.displayName)),t.isHost&&r.a.createElement(at.a.Description,null,r.a.createElement(tt.a,{basic:!0,color:"orange",content:"You are hosting this activity"})),t.isGoing&&!t.isHost&&r.a.createElement(at.a.Description,null,r.a.createElement(tt.a,{basic:!0,color:"green",content:"You are going to this activity"})))))),r.a.createElement(nt.a,null,r.a.createElement(rt.a,{name:"clock"}),Object(it.a)(t.date,"h:mm a"),r.a.createElement(rt.a,{name:"marker"}),t.venue,",",t.city),r.a.createElement(nt.a,{secondary:!0},r.a.createElement(ut,{attendees:t.attendees})),r.a.createElement(nt.a,{clearing:!0},r.a.createElement("span",null,t.description),r.a.createElement(u.a,{as:p.a,to:"/activities/".concat(t.id),floated:"right",content:"View",color:"blue"})))},mt=Object(d.a)((function(){var e=Object(n.useContext)(Qe).activityStore.activitiesbyDate;return r.a.createElement(n.Fragment,null,e.map((function(e){var t=Object(Ze.a)(e,2),a=t[0],i=t[1];return r.a.createElement(n.Fragment,{key:a},r.a.createElement(tt.a,{size:"large",color:"blue"},Object(it.a)(a,"eeee do MMMM ")),r.a.createElement(at.a.Group,{divided:!0},i.map((function(e){return r.a.createElement(st,{key:e.id,activity:e})}))))})))})),dt=a(730),pt=function(e){var t=e.inverted,a=void 0===t||t,n=e.content;return r.a.createElement(dt.a,{active:!0,inverted:a},r.a.createElement(et.a,{content:n}))},bt=a(371),ft=a.n(bt),ht=a(731),gt=a(187),vt=Object(d.a)((function(){var e=Object(n.useContext)(Qe).activityStore,t=e.predicate,a=e.setPredicate;return r.a.createElement(n.Fragment,null,r.a.createElement(l.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:50}},r.a.createElement(ht.a,{icon:"filter",attached:!0,color:"teal",content:"Filters"}),r.a.createElement(l.a.Item,{active:0===t.size,onClick:function(){return a("all","true")},color:"blue",name:"all"}),r.a.createElement(l.a.Item,{active:t.has("isGoing"),onClick:function(){return a("isGoing","true")},color:"blue",name:"username",content:"I'm Going"}),r.a.createElement(l.a.Item,{active:t.has("isHost"),onClick:function(){return a("isHost","true")},color:"blue",name:"host",content:"I'm hosting"})),r.a.createElement(ht.a,{icon:"calendar",attached:!0,color:"teal",content:"Select Date"}),r.a.createElement(gt.Calendar,{onChange:function(e){return a("startDate",e)},value:t.get("startDate")||new Date}))})),yt=Object(d.a)((function(){var e=Object(n.useContext)(Qe).activityStore,t=e.loadActivities,a=e.loadingInitial,i=e.setPage,o=e.page,c=e.totalPages,l=Object(n.useState)(!1),u=Object(Ze.a)(l,2),s=u[0],m=u[1];return Object(n.useEffect)((function(){t()}),[t]),a&&0===o?r.a.createElement(pt,{content:"Loading..."}):r.a.createElement(_e.a,null,r.a.createElement(_e.a.Column,{width:10},r.a.createElement(ft.a,{pageStart:0,loadMore:function(){m(!0),i(o+1),t().then((function(){return m(!1)}))},hasMore:!s&&o+1<c,initialLoad:!1},r.a.createElement(mt,null))),r.a.createElement(_e.a.Column,{width:6},r.a.createElement(vt,null)),r.a.createElement(_e.a.Column,{width:10},r.a.createElement(et.a,{active:s})))})),Et=a(88),wt=a(51),jt=a(30),Ot=a(718),Ct=function(e){var t=e.input,a=e.width,n=e.type,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(Ot.a.Field,{error:c&&!!l,type:n,width:a},r.a.createElement("input",Object.assign({},t,{placeholder:i})),c&&l&&r.a.createElement(tt.a,{basic:!0,color:"red"},l))},St=a(73),xt=a(47),kt=a(727),Pt=function(e){var t=e.error,a=e.text;return r.a.createElement(kt.a,{error:!0},r.a.createElement(kt.a.Header,null,t.statusText),t.data&&Object.keys(t.data.errors).length>0&&r.a.createElement(kt.a.List,null,Object.values(t.data.errors).flat().map((function(e,t){return r.a.createElement(kt.a.Item,{key:t},e)}))),a&&r.a.createElement(kt.a.Content,{content:a}))},At=Object(xt.combineValidators)({email:Object(xt.isRequired)("Email"),password:Object(xt.isRequired)("Password")}),zt=function(){var e=Object(n.useContext)(Qe).userStore.login;return r.a.createElement(jt.b,{validate:At,onSubmit:function(t){return e(t).catch((function(e){return Object(wt.a)({},St.a,e)}))},render:function(e){var t=e.handleSubmit,a=e.submitting,n=(e.form,e.submitError),i=e.invalid,o=e.pristine,c=e.dirtySinceLastSubmit;return r.a.createElement(Ot.a,{onSubmit:t,error:!0},r.a.createElement(ht.a,{as:"h2",content:"Login ",color:"teal",textAlign:"center"}),r.a.createElement(jt.a,{name:"email",component:Ct,placeholder:"Email"}),r.a.createElement(jt.a,{name:"password",component:Ct,placeholder:"Password",type:"password"}),n&&!c&&r.a.createElement(Pt,{error:n,text:"Invalid email or password"}),r.a.createElement(u.a,{disabled:i&&!c||o,loading:a,positive:!0,content:"Login"}))}})},It=function(){var e=Object(n.useContext)(Qe).userStore.register;return r.a.createElement(jt.b,{onSubmit:function(t){return e(t).catch((function(e){return Object(wt.a)({},St.a,e)}))},render:function(e){var t=e.handleSubmit,a=e.submitting,n=e.submitError,i=e.invalid,o=e.pristine,c=e.dirtySinceLastSubmit;return r.a.createElement(Ot.a,{onSubmit:t,error:!0},r.a.createElement(ht.a,{as:"h2",content:"Sign Up ",color:"teal",textAlign:"center"}),r.a.createElement(jt.a,{name:"username",component:Ct,placeholder:"username"}),r.a.createElement(jt.a,{name:"displayname",component:Ct,placeholder:"displayname"}),r.a.createElement(jt.a,{name:"email",component:Ct,placeholder:"Email"}),r.a.createElement(jt.a,{name:"password",component:Ct,placeholder:"Password",type:"password"}),n&&!c&&r.a.createElement(Pt,{error:n,text:"Invalid email or password"}),r.a.createElement(u.a,{disabled:i&&!c||o,loading:a,positive:!0,content:"Register"}))}})},Mt=function(){var e=Object(n.useContext)(Qe),t=e.userStore,a=t.isLoggedIn,i=t.user,o=e.modalStore.openModal;return r.a.createElement(nt.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead"},r.a.createElement(c.a,{text:!0},r.a.createElement(ht.a,{as:"h1",inverted:!0},r.a.createElement(s.a,{size:"massive",src:"/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Home"),a&&i?r.a.createElement(n.Fragment,null,r.a.createElement(ht.a,{as:"h2",inverted:!0,content:"Welcome ".concat(i.displayName)}),r.a.createElement(u.a,{as:p.a,to:"/activities",size:"huge",inverted:!0},"Go to Activities.")):r.a.createElement(n.Fragment,null,r.a.createElement(ht.a,{as:"h2",inverted:!0,content:"Welcome to SportifyMe"}),r.a.createElement(u.a,{onClick:function(){return o(r.a.createElement(zt,null))},size:"huge",inverted:!0},"Login"),r.a.createElement(u.a,{onClick:function(){return o(r.a.createElement(It,null))},size:"huge",inverted:!0},"Register"))))},Rt=a(188),Dt=function e(t){Object(b.a)(this,e),this.id=void 0,this.title="",this.category="",this.description="",this.date=void 0,this.time=void 0,this.city="",this.venue="",t&&t.date&&(t.time=t.date),Object.assign(this,t)},Tt=a(373),Ft=function(e){var t=e.input,a=e.width,n=e.rows,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(Ot.a.Field,{error:c&&!!l,width:a},r.a.createElement("textarea",Object.assign({rows:n},t,{placeholder:i})),c&&l&&r.a.createElement(tt.a,{basic:!0,color:"red"},l))},Nt=a(715),Lt=function(e){var t=e.input,a=e.width,n=e.options,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(Ot.a.Field,{error:c&&!!l,width:a},r.a.createElement(Nt.a,{value:t.value,onChange:function(e,a){return t.onChange(a.value)},placeholder:i,options:n}),c&&l&&r.a.createElement(tt.a,{basic:!0,color:"red"},l))},Ht=[{key:"tennis",text:"Tennis",value:"tennis"},{key:"soccer",text:"Soccer",value:"soccer"},{key:"swimming",text:"Swimming",value:"swimming"},{key:"baskteball",text:"Basketball",value:"baskteball"},{key:"gym",text:"Gym",value:"gym"},{key:"volleyball",text:"Volleyball",value:"volleyball"}],Gt=function(e){var t=e.input,a=e.width,n=(e.id,e.placeholder),i=e.date,o=void 0!==i&&i,c=e.time,l=void 0!==c&&c,u=e.meta,s=u.touched,m=u.error,d=Object(Rt.a)(e,["input","width","id","placeholder","date","time","meta"]);return r.a.createElement(Ot.a.Field,{error:s&&!!m,width:a},r.a.createElement(gt.DateTimePicker,Object.assign({placeholder:n,value:t.value||null,onChange:t.onChange,date:o,time:l,onBlur:t.onBlur,onKeyDown:function(e){return e.preventDefault()}},d)),s&&m&&r.a.createElement(tt.a,{basic:!0,color:"red"},m))},Ut=Object(xt.combineValidators)({title:Object(xt.isRequired)({message:"Title is required"}),category:Object(xt.isRequired)("Category"),description:Object(xt.composeValidators)(Object(xt.isRequired)("Description"),Object(xt.hasLengthGreaterThan)(4)({message:"Description too short, atleast 5 charachters"}))(),city:Object(xt.isRequired)("City"),venue:Object(xt.isRequired)("Venue"),date:Object(xt.isRequired)("Date"),time:Object(xt.isRequired)("Time")}),Bt=Object(d.a)((function(e){var t=e.match,a=e.history,i=Object(n.useContext)(Qe).activityStore,o=i.sumbitting,c=(i.activity,i.loadActivity),l=i.createActivity,s=i.editActivity,m=Object(n.useState)(new Dt),d=Object(Ze.a)(m,2),p=d[0],b=d[1],f=Object(n.useState)(!1),h=Object(Ze.a)(f,2),g=h[0],v=h[1];Object(n.useEffect)((function(){t.params.id&&(v(!0),c(t.params.id).then((function(e){return b(new Dt(e))})).finally((function(){return v(!1)})))}),[c,t.params.id]);return r.a.createElement(_e.a,null,r.a.createElement(_e.a.Column,{width:10},r.a.createElement(nt.a,{clearing:!0},r.a.createElement(jt.b,{validate:Ut,initialValues:p,onSubmit:function(e){var t=function(e,t){var a=t.getHours()+":"+t.getMinutes()+":00",n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),o="".concat(n,"-").concat(r,"-").concat(i);return new Date(o+" "+a)}(e.date,e.time),a=(e.date,e.time,Object(Rt.a)(e,["date","time"]));if(a.date=t,a.id)s(a);else{var n=Object(Ke.a)({},a,{id:Object(Tt.v4)()});l(n)}},render:function(e){var t=e.handleSubmit,n=e.invalid,i=e.pristine;return r.a.createElement(Ot.a,{onSubmit:t,loading:g},r.a.createElement(jt.a,{name:"title",placeholder:"Title",value:p.title,component:Ct}),r.a.createElement(jt.a,{name:"description",placeholder:"Description",value:p.description,rows:3,component:Ft}),r.a.createElement(jt.a,{name:"category",placeholder:"Category",value:p.category,options:Ht,component:Lt}),r.a.createElement(Ot.a.Group,{widths:"equal"},r.a.createElement(jt.a,{name:"date",placeholder:"Date",date:!0,value:p.date,component:Gt}),r.a.createElement(jt.a,{name:"time",placeholder:"Time",value:p.date,time:!0,component:Gt})),r.a.createElement(jt.a,{name:"city",placeholder:"City",value:p.city,component:Ct}),r.a.createElement(jt.a,{name:"venue",placeholder:"Venue",value:p.venue,component:Ct}),r.a.createElement(u.a,{loading:o,disabled:g||n||i,floated:"right",positive:!0,type:"submit",content:"Submit"}),r.a.createElement(u.a,{onClick:p.id?function(){return a.push("/activities/".concat(p.id))}:function(){return a.push("/activities")},disabled:g,floated:"right",type:"button",content:"Cancel"}))}}))))})),qt=function(e){var t=e.activity,a=Object(n.useContext)(Qe),i=a.modalStore.closeModal,o=a.activityStore.deleteActivity;return r.a.createElement("div",null,r.a.createElement(ht.a,null,"Are You sure you want to delete this activity?"),r.a.createElement(u.a,{color:"red",content:"Delete",onClick:function(e){return o(e,t.id).then((function(){return i()}))}}),r.a.createElement(u.a,{type:"button",content:"Cancel",onClick:function(){return i()}}))},Vt={filter:"brightness(30%)"},Wt={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},Yt=Object(d.a)((function(e){var t=e.activity,a=Object(n.useContext)(Qe),i=t.attendees.filter((function(e){return e.isHost}))[0],o=a.modalStore.openModal,c=a.activityStore,l=c.attendActivity,m=c.cancelAttendance,d=c.loading;return r.a.createElement(nt.a.Group,null,r.a.createElement(nt.a,{basic:!0,attached:"top",style:{padding:"0"}},r.a.createElement(s.a,{src:"/assets/categoryImages/".concat(t.category,".jpg"),fluid:!0,style:Vt}),r.a.createElement(nt.a,{basic:!0,style:Wt},r.a.createElement(at.a.Group,null,r.a.createElement(at.a,null,r.a.createElement(at.a.Content,null,r.a.createElement(ht.a,{size:"huge",content:t.title,style:{color:"white"}}),r.a.createElement("p",null,Object(it.a)(t.date,"eeee do MMMM")),r.a.createElement("p",null,"Hosted by"," ",r.a.createElement(p.a,{to:"/profile/".concat(i.usename)},r.a.createElement("strong",null,i.displayName)))))))),r.a.createElement(nt.a,{clearing:!0,attached:"bottom"},t.isHost?r.a.createElement(u.a.Group,{widths:2},r.a.createElement(u.a,{as:p.a,to:"/manage/".concat(t.id),color:"orange",floated:"right"},"Manage Event"),r.a.createElement(u.a,{onClick:function(){return o(r.a.createElement(qt,{activity:t}))},color:"red",floated:"left"},"Delete")):t.isGoing?r.a.createElement(u.a,{loading:d,onClick:m},"Cancel attendance"):r.a.createElement(u.a,{loading:d,onClick:l,color:"teal"},"Join Activity")))})),Jt=function(e){var t=e.activity;return r.a.createElement(nt.a.Group,null,r.a.createElement(nt.a,{attached:"top"},r.a.createElement(_e.a,null,r.a.createElement(_e.a.Column,{width:1},r.a.createElement(rt.a,{size:"large",color:"teal",name:"info"})),r.a.createElement(_e.a.Column,{width:15},r.a.createElement("p",null,t.description)))),r.a.createElement(nt.a,{attached:!0},r.a.createElement(_e.a,{verticalAlign:"middle"},r.a.createElement(_e.a.Column,{width:1},r.a.createElement(rt.a,{name:"calendar",size:"large",color:"teal"})),r.a.createElement(_e.a.Column,{width:15},r.a.createElement("span",null,Object(it.a)(t.date,"eeee do MMMM")," at"," ",Object(it.a)(t.date,"h:mm a"))))),r.a.createElement(nt.a,{attached:!0},r.a.createElement(_e.a,{verticalAlign:"middle"},r.a.createElement(_e.a.Column,{width:1},r.a.createElement(rt.a,{name:"marker",size:"large",color:"teal"})),r.a.createElement(_e.a.Column,{width:11},r.a.createElement("span",null,t.venue,", ",t.city)))))},Kt=a(720),$t=a(725),Qt=Object(d.a)((function(){var e=Object(n.useContext)(Qe).activityStore,t=e.createHubConnection,a=e.stopHubConnection,i=e.addComment,o=e.activity;return Object(n.useEffect)((function(){return t(o.id),function(){a()}}),[t,a,o]),r.a.createElement(n.Fragment,null,r.a.createElement(nt.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(ht.a,null,"Chat about this event")),r.a.createElement(nt.a,{attached:!0},r.a.createElement(Kt.a.Group,null,o&&o.comments&&o.comments.map((function(e){return r.a.createElement(Kt.a,{key:e.id},r.a.createElement(Kt.a.Avatar,{src:e.image||"/assets/user.png"}),r.a.createElement(Kt.a.Content,null,r.a.createElement(Kt.a.Author,{as:p.a,to:"/profile/".concat(e.username)},e.displayName),r.a.createElement(Kt.a.Metadata,null,r.a.createElement("div",null,Object($t.a)(e.createdAt,new Date))),r.a.createElement(Kt.a.Text,null,e.body)))})),r.a.createElement(jt.b,{onSubmit:i,render:function(e){var t=e.handleSubmit,a=e.submitting,n=e.form;return r.a.createElement(Ot.a,{onSubmit:function(){return t().then((function(){return n.reset()}))}},r.a.createElement(jt.a,{name:"body",component:Ft,rows:2,placeholder:"Add your comment"}),r.a.createElement(u.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0,loading:a}))}}))))})),Xt=Object(d.a)((function(e){var t=e.attendees;return r.a.createElement(n.Fragment,null,r.a.createElement(nt.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},t.length," ",1===t.length?"Person":"People"," going"),r.a.createElement(nt.a,{attached:!0},r.a.createElement(ot.a,{relaxed:!0,divided:!0},t.map((function(e){return r.a.createElement(at.a,{key:e.usename,style:{position:"relative"}},e.isHost&&r.a.createElement(tt.a,{style:{position:"absolute"},color:"orange",ribbon:"right"},"Host"),r.a.createElement(s.a,{size:"tiny",src:e.image||"/assets/user.png"}),r.a.createElement(at.a.Content,{verticalAlign:"middle"},r.a.createElement(at.a.Header,{as:"h3"},r.a.createElement(p.a,{to:"/profile/".concat(e.usename)},e.displayName)),e.following&&r.a.createElement(at.a.Extra,{style:{color:"orange"}},"Following")))})))))})),Zt=Object(d.a)((function(e){var t=e.match,a=e.history,i=Object(n.useContext)(Qe).activityStore,o=i.activity,c=i.loadActivity,l=i.loadingInitial;return Object(n.useEffect)((function(){c(t.params.id)}),[c,t.params.id,a]),l||!o?r.a.createElement(pt,{content:"Loading activity..."}):o?r.a.createElement(_e.a,null,r.a.createElement(_e.a.Column,{width:10},r.a.createElement(Yt,{activity:o}),r.a.createElement(Jt,{activity:o}),r.a.createElement(Qt,null)),r.a.createElement(_e.a.Column,{width:6},r.a.createElement(Xt,{attendees:o.attendees}))):r.a.createElement("h2",null)})),_t=function(){return r.a.createElement(nt.a,{placeholder:!0},r.a.createElement(ht.a,{icon:!0},r.a.createElement(rt.a,{name:"search"}),"Oops - we've looked everywhere but couldn't find this."),r.a.createElement(nt.a.Inline,null,r.a.createElement(u.a,{as:p.a,to:"/activities",primary:!0},"Return to Activities page")))},ea=a(719),ta=Object(d.a)((function(){var e=Object(n.useContext)(Qe).modalStore,t=e.modal,a=t.open,i=t.body,o=e.closeModal;return r.a.createElement(ea.a,{open:a,onClose:o,size:"mini"},r.a.createElement(ea.a.Content,null,i))})),aa=a(729),na=a(716),ra=a(733),ia=Object(d.a)((function(e){var t=e.profile,a=e.isCurrentUser,n=e.loading,i=e.follow,o=e.unfollow;return r.a.createElement(nt.a,null,r.a.createElement(_e.a,null,r.a.createElement(_e.a.Column,{width:12},r.a.createElement(at.a.Group,null,r.a.createElement(at.a,null,r.a.createElement(at.a.Image,{avatar:!0,size:"small",src:t.image||"/assets/user.png"}),r.a.createElement(at.a.Content,{verticalAlign:"middle"},r.a.createElement(ht.a,{as:"h1"},t.displayName))))),r.a.createElement(_e.a.Column,{width:4},r.a.createElement(aa.a.Group,{widths:2},r.a.createElement(aa.a,{label:"Followers",value:t.followersCount}),r.a.createElement(aa.a,{label:"Following",value:t.followingCount})),r.a.createElement(na.a,null),!a&&r.a.createElement(ra.a,{animated:"move"},r.a.createElement(ra.a.Content,{visible:!0,style:{width:"100%"}},r.a.createElement(u.a,{fluid:!0,color:"teal",content:t.following?"Following":"Not Following"})),r.a.createElement(ra.a.Content,{hidden:!0},r.a.createElement(u.a,{loading:n,fluid:!0,basic:!0,color:t.following?"red":"green",content:t.following?"Unfollow":"Follow",onClick:t.following?function(){return o(t.userName)}:function(){return i(t.userName)}}))))))})),oa=a(734),ca=a(726),la=a(385),ua={border:"dashed 3px ",borderColor:"#eee",borderRadius:"5px",paddingTop:"30px",textAlign:"center",height:"200px"},sa={borderColor:"green"},ma=function(e){var t=e.setFiles,a=Object(n.useCallback)((function(e){t(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[]),i=Object(la.a)({onDrop:a}),o=i.getRootProps,c=i.getInputProps,l=i.isDragActive;return r.a.createElement("div",Object.assign({},o(),{style:l?Object(Ke.a)({},ua,{},sa):ua}),r.a.createElement("input",c()),r.a.createElement(rt.a,{name:"upload",size:"huge"}),r.a.createElement(ht.a,{content:"Drop image here"}))},da=a(383),pa=a.n(da),ba=(a(668),function(e){var t=e.setImage,a=e.imagePreview,i=Object(n.useRef)(null);return r.a.createElement(pa.a,{ref:i,src:a,style:{height:200,width:"100%"},aspectRatio:1,guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){i.current&&"undefined"===typeof i.current.getCroppedCanvas()||i&&i.current&&i.current.getCroppedCanvas().toBlob((function(e){t(e)}),"image/jpeg")},preview:".img-preview"})}),fa=Object(d.a)((function(e){var t=e.loading,a=e.uploadPhoto,i=Object(n.useState)([]),o=Object(Ze.a)(i,2),c=o[0],l=o[1],s=Object(n.useState)(null),m=Object(Ze.a)(s,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){return function(){c.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}})),r.a.createElement(n.Fragment,null,r.a.createElement(_e.a,null,r.a.createElement(_e.a.Column,{width:4},r.a.createElement(ht.a,{color:"teal",sub:!0,content:"Step 1 - Add Photo"}),r.a.createElement(ma,{setFiles:l})),r.a.createElement(_e.a.Column,{width:1}),r.a.createElement(_e.a.Column,{width:4},r.a.createElement(ht.a,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),c.length>0&&r.a.createElement(ba,{setImage:p,imagePreview:c[0].preview})),r.a.createElement(_e.a.Column,{width:1}),r.a.createElement(_e.a.Column,{width:4},r.a.createElement(ht.a,{sub:!0,color:"teal",content:"Step 3 - Preview & Upload"}),c.length>0&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"img-preview",style:{minHeight:"200px",overflow:"hidden"}}),r.a.createElement(u.a.Group,{widths:2},r.a.createElement(u.a,{positive:!0,icone:"check",loading:t,onClick:function(){return a(d)}}),r.a.createElement(u.a,{icone:"close",disabled:t,onClick:function(){return l([])}}))))))})),ha=Object(d.a)((function(){var e=Object(n.useContext)(Qe).profileStore,t=e.profile,a=e.isCurrentUser,i=e.uploadPhoto,o=e.uploadingPhoto,c=e.setMain,l=e.loading,m=e.deletePhoto,d=Object(n.useState)(!1),p=Object(Ze.a)(d,2),b=p[0],f=p[1],h=Object(n.useState)(void 0),g=Object(Ze.a)(h,2),v=g[0],y=g[1],E=Object(n.useState)(void 0),w=Object(Ze.a)(E,2),j=w[0],O=w[1];return r.a.createElement(oa.a.Pane,null,r.a.createElement(_e.a,null,r.a.createElement(_e.a.Column,{width:16,style:{paddingBottom:0}},r.a.createElement(ht.a,{floated:"left",icon:"image",content:"Photos"}),a&&r.a.createElement(u.a,{floated:"right",basic:!0,content:b?"Cancel":"Add photo",onClick:function(){return f(!b)}})),r.a.createElement(_e.a.Column,{width:16},b?r.a.createElement(fa,{uploadPhoto:function(e){i(e).then((function(){return f(!1)}))},loading:o}):r.a.createElement(ca.a.Group,{itemsPerRow:5},t&&t.photos.map((function(e){return r.a.createElement(ca.a,{key:e.id},r.a.createElement(s.a,{src:e.url}),a&&r.a.createElement(u.a.Group,{fluid:!0,widths:2},r.a.createElement(u.a,{name:e.id,loading:l&&v===e.id,onClick:function(t){c(e),y(t.currentTarget.name)},basic:!0,disabled:e.isMain,positive:!0,content:"Main"}),r.a.createElement(u.a,{name:e.id,disabled:e.isMain,loading:l&&j===e.id,onClick:function(t){m(e),O(t.currentTarget.name)},basic:!0,negative:!0,icon:"trash"})))}))))))})),ga=function(e){var t=e.profile;return r.a.createElement(ca.a,{as:p.a,to:"/profile/".concat(t.userName)},r.a.createElement(s.a,{src:t.image||"/assets/user.png"}),r.a.createElement(ca.a.Content,null,r.a.createElement(ca.a.Header,null,t.displayName)),r.a.createElement(ca.a.Content,{extra:!0},r.a.createElement("div",null,r.a.createElement(rt.a,{name:"user"}),t.followersCount)))},va=function(){var e=Object(n.useContext)(Qe).profileStore,t=e.profile,a=e.followings,i=e.loading,o=e.activeTab;return r.a.createElement(oa.a.Pane,{loading:i},r.a.createElement(_e.a,null,r.a.createElement(_e.a.Column,{width:16},r.a.createElement(ht.a,{floated:"left",icon:"user",content:3===o?"People following ".concat(t.displayName):"People ".concat(t.displayName," is following")})),r.a.createElement(_e.a.Column,{width:16},r.a.createElement(ca.a.Group,{itemsPerRow:5},a.map((function(e){return r.a.createElement(ga,{key:e.userName,profile:e})}))))))},ya=[{menuItem:"Future Events",pane:{key:"futureEvents"}},{menuItem:"Past Events",pane:{key:"pastEvents"}},{menuItem:"Hosting",pane:{key:"hosted"}}],Ea=Object(d.a)((function(){var e=Object(n.useContext)(Qe).profileStore,t=e.loadUserActivities,a=e.profile,i=e.loadingActivities,o=e.userActivities;Object(n.useEffect)((function(){t(a.userName)}),[t,a]);return r.a.createElement(oa.a.Pane,{loading:i},r.a.createElement(_e.a,null,r.a.createElement(_e.a.Column,{width:16},r.a.createElement(ht.a,{floated:"left",icon:"calendar",content:"Activities"})),r.a.createElement(_e.a.Column,{width:16},r.a.createElement(oa.a,{panes:ya,menu:{secondary:!0,pointing:!0},onTabChange:function(e,n){return function(e,n){var r;switch(n.activeIndex){case 1:r="past";break;case 2:r="hosting";break;default:r="future"}t(a.userName,r)}(0,n)}}),r.a.createElement("br",null),r.a.createElement(ca.a.Group,{itemsPerRow:4},o.map((function(e){return r.a.createElement(ca.a,{as:p.a,to:"/activities/".concat(e.id),key:e.id},r.a.createElement(s.a,{src:"/assets/categoryImages/".concat(e.category,".jpg"),style:{minHeight:100,objectFit:"cover"}}),r.a.createElement(ca.a.Content,null,r.a.createElement(ca.a.Header,{textAlign:"center"},e.title),r.a.createElement(ca.a.Meta,{textAlign:"center"},r.a.createElement("div",null,Object(it.a)(new Date(e.date),"do LLL")),r.a.createElement("div",null,Object(it.a)(new Date(e.date),"h:mm a")))))}))))))})),wa=[{menuItem:"About",render:function(){return r.a.createElement(oa.a.Pane,null,"About content")}},{menuItem:"Photos",render:function(){return r.a.createElement(ha,null)}},{menuItem:"Activities",render:function(){return r.a.createElement(Ea,null)}},{menuItem:"Followers",render:function(){return r.a.createElement(va,null)}},{menuItem:"Following",render:function(){return r.a.createElement(va,null)}}],ja=function(e){var t=e.setActiveTab;return r.a.createElement(oa.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:wa,onTabChange:function(e,a){return t(a.activeIndex)}})},Oa=Object(d.a)((function(e){var t=e.match,a=Object(n.useContext)(Qe).profileStore,i=a.setActiveTab,o=a.loadingProfile,c=a.profile,l=a.loadProfile,u=a.follow,s=a.unfollow,m=a.isCurrentUser,d=a.loading;return Object(n.useEffect)((function(){l(t.params.username)}),[l,t]),o?r.a.createElement(pt,{content:"Loading profile..."}):r.a.createElement(_e.a,null,r.a.createElement(_e.a.Column,{width:16},r.a.createElement(ia,{profile:c,isCurrentUser:m,follow:u,unfollow:s,loading:d}),r.a.createElement(ja,{setActiveTab:i})))})),Ca=Object(Et.f)(Object(d.a)((function(e){var t=e.location,a=Object(n.useContext)(Qe),i=a.commonStore,o=i.setAppLoaded,l=i.token,u=i.appLoaded,s=a.userStore.getUser;return Object(n.useEffect)((function(){l?s().finally((function(){return o()})):o()}),[s,o,l]),u?r.a.createElement(n.Fragment,null,r.a.createElement(ta,null),r.a.createElement(C.a,{position:"bottom-right"}),r.a.createElement(Et.a,{exact:!0,path:"/",component:Mt}),r.a.createElement(Et.a,{path:"/(.+)",render:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Xe,null),r.a.createElement(c.a,{style:{marginTop:"7em"}},r.a.createElement(Et.c,null,r.a.createElement(Et.a,{exact:!0,path:"/activities",component:yt}),r.a.createElement(Et.a,{path:"/activities/:id",component:Zt}),r.a.createElement(Et.a,{key:t.key,path:["/createActivity","/manage/:id"],component:Bt}),r.a.createElement(Et.a,{path:"/profile/:username",component:Oa}),r.a.createElement(Et.a,{component:_t}))))}})):r.a.createElement(pt,{content:"Loading app"})}))),Sa=(a(669),a(53));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xa=Object(Et.f)((function(e){var t=e.children,a=e.location.pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[a]),t})),ka=(a(670),a(384)),Pa=a.n(ka);a.d(t,"history",(function(){return Aa})),Pa()();var Aa=Object(Sa.a)();o.a.render(r.a.createElement(Et.b,{history:Aa},r.a.createElement(xa,null,r.a.createElement(Ca,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[398,1,2]]]);
//# sourceMappingURL=main.bd30e1f3.chunk.js.map